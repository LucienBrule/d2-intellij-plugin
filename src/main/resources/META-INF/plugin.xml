<idea-plugin>
  <id>org.jetbrains.plugins.d2</id>
  <name>D2</name>
  <vendor url="https://github.com/develar/d2-intellij-plugin">Vladimir Krivosheev</vendor>
  <description>--replaced by plugin--</description>

  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.platform.images</depends>

  <resource-bundle>messages.D2Bundle</resource-bundle>

  <extensions defaultExtensionNs="com.intellij">
    <fileType name="D2"
              language="d2"
              extensions="d2"
              implementationClass="org.jetbrains.plugins.d2.file.D2FileType"
              fieldName="INSTANCE"/>

    <lang.parserDefinition language="d2" implementationClass="org.jetbrains.plugins.d2.lang.D2ParserDefinition"/>
    <lang.braceMatcher language="d2" implementationClass="org.jetbrains.plugins.d2.editor.D2BraceMatcher"/>
    <lang.commenter language="d2" implementationClass="org.jetbrains.plugins.d2.editor.D2Commenter"/>
    <lang.syntaxHighlighterFactory language="d2"
                                   implementationClass="org.jetbrains.plugins.d2.lang.D2SyntaxHighlighterFactory"/>

    <colorSettingsPage implementation="com.dvd.intellij.d2.ide.settings.D2ColorSettingsPage"/>

    <colorProvider implementation="org.jetbrains.plugins.d2.editor.D2ColorProvider"/>

    <fileEditorProvider implementation="org.jetbrains.plugins.d2.editor.D2FileEditorProvider"/>

    <psi.referenceContributor language="d2"
                              implementation="com.dvd.intellij.d2.ide.reference.D2UrlReferenceContributor"/>

    <formattingService implementation="org.jetbrains.plugins.d2.editor.D2FormatterService"/>

    <!--<completion.contributor language="d2" implementationClass="org.jetbrains.plugins.d2.completion.D2ShapesTypesCompletionContributor"/>-->
    <!--<completion.contributor language="d2" implementationClass="org.jetbrains.plugins.d2.completion.D2StyleCompletionContributor"/>-->
    <completion.contributor language="d2" implementationClass="org.jetbrains.plugins.d2.completion.D2BasicCompletionContributor"/>

    <spellchecker.support language="d2" implementationClass="org.jetbrains.plugins.d2.editor.D2SpellCheckerStrategy"/>

    <notificationGroup displayType="STICKY_BALLOON" id="D2_INFO" key="action.D2.Info.description"/>

    <editorNotificationProvider implementation="org.jetbrains.plugins.d2.editor.D2MissingCompilerNotificationProvider"/>

    <annotator language="d2" implementationClass="org.jetbrains.plugins.d2.lang.D2LiteralAnnotator"/>
    <lang.formatter language="d2" implementationClass="org.jetbrains.plugins.d2.editor.D2FormattingModelBuilder"/>
  </extensions>

  <actions>
    <group id="D2.ThemeChooser"
           class="com.dvd.intellij.d2.ide.action.D2ThemesActionGroup"
           popup="true"
           icon="AllIcons.Toolwindows.ToolWindowPalette"/>
    <group id="D2.LayoutChooser"
           class="com.dvd.intellij.d2.ide.action.D2LayoutEngineActionGroup"
           popup="true"
           icon="AllIcons.General.Layout"/>
    <group id="D2.ExportMenu"
           popup="true"
           icon="AllIcons.ToolbarDecorator.Export">
      <action class="com.dvd.intellij.d2.ide.action.D2ExportAction"
              id="D2.ExportDiagram"
              icon="AllIcons.Actions.MenuSaveall"/>
      <action class="com.dvd.intellij.d2.ide.action.D2LiveBrowserAction"
              id="D2.LiveBrowser"
              icon="AllIcons.RunConfigurations.Web_app"/>
    </group>
    <action class="com.dvd.intellij.d2.ide.action.D2MessagesAction"
            id="D2.Messages"
            icon="AllIcons.Debugger.Console"/>
    <action class="com.dvd.intellij.d2.ide.action.D2InfoAction"
            id="D2.Info"
            icon="AllIcons.General.ShowInfos"/>

    <group id="D2.EditorToolbar">
      <reference id="Images.ToggleTransparencyChessboard"/>
      <reference id="Images.Editor.ToggleGrid"/>
      <separator/>
      <reference id="Images.Editor.ZoomIn"/>
      <reference id="Images.Editor.ZoomOut"/>
      <reference id="Images.Editor.ActualSize"/>
      <reference id="Images.Editor.FitZoomToWindow"/>
      <separator/>
      <reference id="D2.ThemeChooser"/>
      <reference id="D2.LayoutChooser"/>
      <reference id="D2.ExportMenu"/>
      <separator/>
      <reference id="D2.Messages"/>
      <reference id="D2.Info"/>
    </group>

    <group id="D2.EditorPopupMenu">
      <reference id="$Copy"/>
      <reference id="CopyReferencePopupGroup"/>
      <separator/>
      <reference id="SynchronizeCurrentFile"/>
      <separator/>
      <reference id="D2.EditorToolbar"/>
    </group>
  </actions>
</idea-plugin>